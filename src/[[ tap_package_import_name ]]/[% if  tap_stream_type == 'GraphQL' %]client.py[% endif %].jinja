[%- set base_stream = tap_source_id + 'Stream' -%]
[%- set authenticator = tap_source_id + 'Authenticator' -%]

"""GraphQL client handling, including [[ base_stream ]] base class."""

from __future__ import annotations

from typing import override

from singer_sdk.streams import [[ tap_stream_type ]]Stream

[%- if tap_auth_method in ("OAuth2", "JWT") %]

from [[ tap_package_import_name ]].auth import [[ authenticator ]]
[%- endif %]


class [[ base_stream ]]([[ tap_stream_type ]]Stream[int]):
    """[[ tap_source_name ]] stream class."""

    url_base = "https://api.mysample.com"

[%- if tap_auth_method in ("OAuth2", "JWT") %]

    @override
    @property
    def authenticator(self) -> [[ authenticator ]]:
        return [[ authenticator ]](
            oauth_endpoint="TODO",
            oauth_scopes="TODO",
            cliend_id=self.config["client_id"],
            client_secret=self.config["client_secret"],
        )

[%- endif %]

    @override
    @property
    def http_headers(self) -> dict[str, str]:
        return {**super().http_headers}
